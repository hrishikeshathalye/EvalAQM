!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.dashjs=e():t.dashjs=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=76)}({1:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e,n,a;return e=t,(n=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}])&&r(e.prototype,n),a&&r(e,a),t}());e.a=a},14:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=n(1);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(a(t)!==e)throw r.a.BAD_ARGUMENT_ERROR}function o(t){if(!(null!==t&&!isNaN(t)&&t%1==0))throw r.a.BAD_ARGUMENT_ERROR+" : argument is not an integer"}},15:function(t,e,n){"use strict";var r=n(36),a=n.n(r);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"mixin",value:function(e,n,r){var a,o={};if(e)for(var s in n)n.hasOwnProperty(s)&&(a=n[s],s in e&&(e[s]===a||s in o&&o[s]===a)||("object"===i(e[s])&&null!==e[s]?e[s]=t.mixin(e[s],a,r):e[s]=r(a)));return e}},{key:"clone",value:function(e){if(!e||"object"!==i(e))return e;var n;if(e instanceof Array){n=[];for(var r=0,a=e.length;r<a;++r)r in e&&n.push(t.clone(e[r]))}else n={};return t.mixin(n,e,t.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(t,e){try{if(!e||0===e.length)return t;var n=new URL(t);return e.forEach((function(t){t.key&&t.value&&n.searchParams.set(t.key,t.value)})),n.href}catch(e){return t}}},{key:"parseHttpHeaders",value:function(t){var e={};if(!t)return e;for(var n=t.trim().split("\r\n"),r=0,a=n.length;r<a;r++){var i=n[r],o=i.indexOf(": ");o>0&&(e[i.substring(0,o)]=i.substring(o+2))}return e}},{key:"generateUuid",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}},{key:"getRelativeUrl",value:function(t,e){try{var n=new URL(t),r=new URL(e);if(n.protocol=r.protocol,n.origin!==r.origin)return e;var i=a.a.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),r.pathname.substr(0,r.pathname.lastIndexOf("/"))),o=0===i.length?1:0;return i+=r.pathname.substr(r.pathname.lastIndexOf("/")+o,r.pathname.length-1),r.pathname.length<i.length?r.pathname:i}catch(t){return e}}}],(n=null)&&o(e.prototype,n),r&&o(e,r),t}();e.a=s},16:function(t,e,n){"use strict";var r=n(3),a=n(15),i=n(6),o=n(1),s=n(5),u=n(7),c=n(2);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(){var t,e,n=this.context,r=Object(u.a)(n).getInstance(),h={"streaming.delay.liveDelay":c.a.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":c.a.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":c.a.SETTING_UPDATED_CATCHUP_ENABLED},d={debug:{logLevel:i.a.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{maxDrift:NaN,playbackRate:NaN,playbackBufferMin:.5,enabled:null,latencyThreshold:60,mode:o.a.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:o.a.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:o.a.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:o.a.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:1e4,retryIntervals:(t={},f(t,s.a.MPD_TYPE,500),f(t,s.a.XLINK_EXPANSION_TYPE,500),f(t,s.a.MEDIA_SEGMENT_TYPE,1e3),f(t,s.a.INIT_SEGMENT_TYPE,1e3),f(t,s.a.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),f(t,s.a.INDEX_SEGMENT_TYPE,1e3),f(t,s.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),f(t,s.a.LICENSE,1e3),f(t,s.a.OTHER_TYPE,1e3),f(t,"lowLatencyReductionFactor",10),t),retryAttempts:(e={},f(e,s.a.MPD_TYPE,3),f(e,s.a.XLINK_EXPANSION_TYPE,1),f(e,s.a.MEDIA_SEGMENT_TYPE,3),f(e,s.a.INIT_SEGMENT_TYPE,3),f(e,s.a.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),f(e,s.a.INDEX_SEGMENT_TYPE,3),f(e,s.a.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),f(e,s.a.LICENSE,3),f(e,s.a.OTHER_TYPE,3),f(e,"lowLatencyMultiplyFactor",5),e),abr:{movingAverageMethod:o.a.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:o.a.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:o.a.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:o.a.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},g=a.a.clone(d);return{get:function(){return g},update:function(t){"object"===l(t)&&function t(e,n,i){for(var o in e)e.hasOwnProperty(o)&&(n.hasOwnProperty(o)?"object"!==l(e[o])||e[o]instanceof Array||null===e[o]?(n[o]=a.a.clone(e[o]),h[i+o]&&r.trigger(h[i+o])):t(e[o],n[o],i.slice()+o+"."):console.error("Settings parameter "+i+o+" is not supported"))}(t,g,"")},reset:function(){g=a.a.clone(d)}}}h.__dashjs_factory_name="Settings";var d=r.a.getSingletonFactory(h);e.a=d},18:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"extend",value:function(t,e){if(t){var n=!!e&&e.override,r=!!e&&e.publicOnly;for(var a in t)!t.hasOwnProperty(a)||this[a]&&!n||r&&-1===t[a].indexOf("public_")||(this[a]=t[a])}}}])&&r(e.prototype,n),a&&r(e,a),t}();e.a=a},19:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=i(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",t.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",t.CMCD_DATA_GENERATED="cmcdDataGenerated",t}return n}(n(18).a));e.a=u},2:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=d(t);if(e){var a=d(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,t);var e=f(n);function n(){return c(this,n),e.apply(this,arguments)}return n}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=i(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",t.BUFFERING_COMPLETED="bufferingCompleted",t.BUFFER_CLEARED="bufferCleared",t.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",t.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",t.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",t.CURRENT_TRACK_CHANGED="currentTrackChanged",t.DATA_UPDATE_COMPLETED="dataUpdateCompleted",t.INBAND_EVENTS="inbandEvents",t.INITIAL_STREAM_SWITCH="initialStreamSwitch",t.INIT_FRAGMENT_LOADED="initFragmentLoaded",t.INIT_FRAGMENT_NEEDED="initFragmentNeeded",t.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",t.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",t.LOADING_COMPLETED="loadingCompleted",t.LOADING_PROGRESS="loadingProgress",t.LOADING_DATA_PROGRESS="loadingDataProgress",t.LOADING_ABANDONED="loadingAborted",t.MANIFEST_UPDATED="manifestUpdated",t.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",t.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",t.QUOTA_EXCEEDED="quotaExceeded",t.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",t.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",t.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",t.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",t.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",t.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",t.SOURCE_BUFFER_ERROR="sourceBufferError",t.STREAMS_COMPOSED="streamsComposed",t.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",t.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",t.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",t.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",t.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",t.URL_RESOLUTION_FAILED="urlResolutionFailed",t.VIDEO_CHUNK_RECEIVED="videoChunkReceived",t.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",t.XLINK_ELEMENT_LOADED="xlinkElementLoaded",t.XLINK_READY="xlinkReady",t.SEEK_TARGET="seekTarget",t.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",t.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",t.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",t}return n}(n(18).a)));e.a=g},25:function(t,e){var n,r,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function E(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new g(t,e)),1!==c.length||l||s(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=E,a.addListener=E,a.once=E,a.off=E,a.removeListener=E,a.removeAllListeners=E,a.emit=E,a.prependListener=E,a.prependOnceListener=E,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},27:function(t,e,n){"use strict";var r=n(3),a=n(8),i=n(1),o=n(9);function s(t){t=t||{};var e=this.context,n=t.dashMetrics;return{getMaxIndex:function(t){var r=Object(a.a)(e).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("useBufferOccupancyABR")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(i.a.MISSING_CONFIG_ERROR)}();var s=t.getMediaInfo(),u=t.getMediaType(),c=n.getCurrentBufferState(u),l=t.getScheduleController(),f=t.getAbrController(),h=t.getStreamInfo(),d=h?h.id:null,g=h&&h.manifestInfo?h.manifestInfo.isDynamic:null,E=f.getThroughputHistory(),_=E.getSafeAverageThroughput(u,g),y=E.getAverageLatency(u),p=t.useBufferOccupancyABR();return isNaN(_)||!c||p||f.getAbandonmentStateFor(d,u)!==o.a.ABANDON_LOAD&&(c.state===o.a.BUFFER_LOADED||g)&&(r.quality=f.getQualityForBitrate(s,_,d,y),l.setTimeToLoadDelay(0),r.reason={throughput:_,latency:y}),r},reset:function(){}}}s.__dashjs_factory_name="ThroughputRule";var u=r.a.getClassFactory(s),c=n(7),l=n(2),f=n(6),h=n(4);function d(t){t=t||{};var e,n,r,s=this.context,u=Object(c.a)(s).getInstance(),d=t.dashMetrics;function g(){(r={})[i.a.VIDEO]={ignoreCount:2},r[i.a.AUDIO]={ignoreCount:2}}function E(){g()}function _(t){isNaN(t.startTime)||t.mediaType!==i.a.AUDIO&&t.mediaType!==i.a.VIDEO||r[t.mediaType].ignoreCount>0&&r[t.mediaType].ignoreCount--}return e={getMaxIndex:function(t){var e=Object(a.a)(s).create();if(!t||!t.hasOwnProperty("getMediaType"))return e;!function(){if(!d||!d.hasOwnProperty("getCurrentBufferLevel")||!d.hasOwnProperty("getCurrentBufferState"))throw new Error(i.a.MISSING_CONFIG_ERROR)}();var u=t.getMediaType(),c=d.getCurrentBufferState(u),l=t.getRepresentationInfo().fragmentDuration,f=t.getStreamInfo(),h=f?f.id:null,g=t.getScheduleController(),E=f&&f.manifestInfo&&f.manifestInfo.isDynamic;if(function(t,e){return!t&&r[e].ignoreCount>0}(g.getPlaybackController().getLowLatencyModeEnabled(),u)||!l)return e;if(c&&c.state===o.a.BUFFER_EMPTY)n.debug("["+u+"] Switch to index 0; buffer is empty."),e.quality=0,e.reason="InsufficientBufferRule: Buffer is empty";else{var _=t.getMediaInfo(),y=t.getAbrController(),p=y.getThroughputHistory(),m=d.getCurrentBufferLevel(u),T=p.getAverageThroughput(u,E),A=p.getAverageLatency(u),R=T*(m/l)*.5;e.quality=y.getQualityForBitrate(_,R,h,A),e.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return e},reset:function(){g(),u.off(h.a.PLAYBACK_SEEKING,E,e),u.off(l.a.BYTES_APPENDED_END_FRAGMENT,_,e)}},n=Object(f.a)(s).getInstance().getLogger(e),g(),u.on(h.a.PLAYBACK_SEEKING,E,e),u.on(l.a.BYTES_APPENDED_END_FRAGMENT,_,e),e}d.__dashjs_factory_name="InsufficientBufferRule";var g=r.a.getClassFactory(d);function E(t){t=t||{};var e,n,r,i,o,s=this.context,u=t.mediaPlayerModel,c=t.dashMetrics,l=t.settings;function h(){r={},i={},o=[]}return e={shouldAbandon:function(t){var e=Object(a.a)(s).create(a.a.NO_CHANGE,{name:E.__dashjs_factory_name});if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getCurrentRequest")&&t.hasOwnProperty("getRepresentationInfo")&&t.hasOwnProperty("getAbrController")))return e;var f,h,d=t.getMediaInfo(),g=t.getMediaType(),_=t.getStreamInfo(),y=_?_.id:null,p=t.getCurrentRequest();if(!isNaN(p.index)){f=g,h=p.index,r[f]=r[f]||{},r[f][h]=r[f][h]||{};var m=u.getStableBufferTime();if(c.getCurrentBufferLevel(g)>m)return e;var T=r[g][p.index];if(null===T||null===p.firstByteDate||i.hasOwnProperty(T.id))return e;if(void 0===T.firstByteTime&&(o[g]=[],T.firstByteTime=p.firstByteDate.getTime(),T.segmentDuration=p.duration,T.bytesTotal=p.bytesTotal,T.id=p.index),T.bytesLoaded=p.bytesLoaded,T.elapsedTime=(new Date).getTime()-T.firstByteTime,T.bytesLoaded>0&&T.elapsedTime>0&&function(t,e){o[t]=o[t]||[],o[t].push(e)}(g,Math.round(8*T.bytesLoaded/T.elapsedTime)),o[g].length>=5&&T.elapsedTime>500&&T.bytesLoaded<T.bytesTotal){var A=o[g].reduce((function(t,e){return t+e}),0);if(T.measuredBandwidthInKbps=Math.round(A/o[g].length),T.estimatedTimeOfDownload=+(8*T.bytesTotal/T.measuredBandwidthInKbps/1e3).toFixed(2),T.estimatedTimeOfDownload<1.8*T.segmentDuration||0===t.getRepresentationInfo().quality)return e;if(!i.hasOwnProperty(T.id)){var R=t.getAbrController(),v=T.bytesTotal-T.bytesLoaded,S=R.getBitrateList(d),b=R.getQualityForBitrate(d,T.measuredBandwidthInKbps*l.get().streaming.abr.bandwidthSafetyFactor,y),I=R.getMinAllowedIndexFor(g,y),N=void 0!==I?Math.max(I,b):b;v>T.bytesTotal*S[N].bitrate/S[R.getQualityFor(g,y)].bitrate&&(e.quality=N,e.reason.throughput=T.measuredBandwidthInKbps,e.reason.fragmentID=T.id,i[T.id]=T,n.debug("["+g+"] frag id",T.id," is asking to abandon and switch to quality to ",N," measured bandwidth was",T.measuredBandwidthInKbps),delete r[g][T.id])}}else T.bytesLoaded===T.bytesTotal&&delete r[g][T.id]}return e},reset:h},n=Object(f.a)(s).getInstance().getLogger(e),h(),e}E.__dashjs_factory_name="AbandonRequestsRule";var _=r.a.getClassFactory(E);function y(){var t,e,n=this.context;return t={getMaxIndex:function(t){var r=Object(a.a)(n).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return r;var i=t.getDroppedFramesHistory(),o=t.getStreamInfo().id;if(i){var s=i.getFrameHistory(o);if(!s||0===s.length)return r;for(var u=0,c=0,l=a.a.NO_CHANGE,f=1;f<s.length;f++)if(s[f]&&(u=s[f].droppedVideoFrames,(c=s[f].totalVideoFrames)>375&&u/c>.15)){l=f-1,e.debug("index: "+l+" Dropped Frames: "+u+" Total Frames: "+c);break}return Object(a.a)(n).create(l,{droppedFrames:u})}return r}},e=Object(f.a)(n).getInstance().getLogger(t),t}y.__dashjs_factory_name="DroppedFramesRule";var p=r.a.getClassFactory(y);function m(){var t,e,n=this.context;return t={getMaxIndex:function(t){for(var r=t?t.getSwitchHistory():null,i=r?r.getSwitchRequests():[],o=0,s=0,u=0,c=Object(a.a)(n).create(),l=0;l<i.length;l++)if(void 0!==i[l]&&(o+=i[l].drops,s+=i[l].noDrops,u+=i[l].dropSize,o+s>=6&&o/s>.075)){c.quality=l>0&&i[l].drops>0?l-1:l,c.reason={index:c.quality,drops:o,noDrops:s,dropSize:u},e.debug("Switch history rule index: "+c.quality+" samples: "+(o+s)+" drops: "+o);break}return c}},e=Object(f.a)(n).getInstance().getLogger(t),t}m.__dashjs_factory_name="SwitchHistoryRule";var T=r.a.getClassFactory(m),A=n(5);function R(t){t=t||{};var e,n,r,s=this.context,u=t.dashMetrics,d=t.mediaPlayerModel,g=Object(c.a)(s).getInstance();function E(t,e,n){var r=n.reduce((function(t,e,r){return e>n[t]?r:t}),0);if(0===r)return null;var a=Math.max(t,10+2*e.length),i=(n[r]-1)/(a/10-1);return{gp:i,Vp:10/i}}function _(t){var e={},n=t.getMediaInfo().bitrateList.map((function(t){return t.bandwidth})),r=function(t){return t.map((function(t){return Math.log(t)}))}(n);r=r.map((function(t){return t-r[0]+1}));var a=d.getStableBufferTime(),i=E(a,n,r);return i?(e.state=1,e.bitrates=n,e.utilities=r,e.stableBufferTime=a,e.Vp=i.Vp,e.gp=i.gp,e.lastQuality=0,y(e)):e.state=0,e}function y(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function p(t,e){var n=d.getStableBufferTime();if(t.stableBufferTime!==n){var r=E(n,t.bitrates,t.utilities);if(r.Vp!==t.Vp||r.gp!==t.gp){var a=u.getCurrentBufferLevel(e),i=a+t.placeholderBuffer;i-=10,i*=r.Vp/t.Vp,i+=10,t.stableBufferTime=n,t.Vp=r.Vp,t.gp=r.gp,t.placeholderBuffer=Math.max(0,i-a)}}}function m(t,e){return t.Vp*(t.utilities[e]+t.gp)}function T(t,e){for(var n=t.bitrates[e],r=t.utilities[e],a=0,i=e-1;i>=0;--i)if(t.utilities[i]<t.utilities[e]){var o=t.bitrates[i],s=t.utilities[i],u=t.Vp*(t.gp+(n*s-o*r)/(n-o));a=Math.max(a,u)}return a}function R(t){var e=t.mediaType===i.a.AUDIO?[i.a.AUDIO]:r;for(var n in e)r.hasOwnProperty(n)&&2===r[n].state&&(r[n].placeholderBuffer=0)}function v(){for(var t in r)if(r.hasOwnProperty(t)){var e=r[t];0!==e.state&&(e.state=1,y(e))}}function S(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=r[t.chunk.mediaInfo.type];if(e&&0!==e.state){var n=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||n>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=n,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=n,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,I(e,t.chunk.mediaInfo.type)}}}function b(t){if(t&&t.metric===o.a.HTTP_REQUEST&&t.value&&t.value.type===A.a.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=r[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),I(e,t.mediaType))}}function I(t,e){if(!isNaN(t.lastSegmentStart)&&!isNaN(t.lastSegmentRequestTimeMs)&&!isNaN(t.placeholderBuffer)){if(t.placeholderBuffer*=.99,!isNaN(t.lastSegmentFinishTimeMs)){var n=u.getCurrentBufferLevel(e)+.001*(t.lastSegmentFinishTimeMs-t.lastSegmentRequestTimeMs),r=m(t,t.lastQuality),a=Math.max(0,r-n);t.placeholderBuffer=Math.min(a,t.placeholderBuffer)}t.lastSegmentWasReplacement&&!isNaN(t.lastSegmentDurationS)&&(t.placeholderBuffer+=t.lastSegmentDurationS),t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN}}function N(t){if(t){var e=r[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function C(t){if(t){var e=r[t.mediaType];if(e&&0!==e.state){var n,a=u.getCurrentBufferLevel(t.mediaType);n=e.abrQuality>0?T(e,e.abrQuality):10;var i=Math.max(0,n-a);e.placeholderBuffer=Math.min(e.placeholderBuffer,i)}}}function O(){r={}}return e={getMaxIndex:function(t){var e=Object(a.a)(s).create();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useBufferOccupancyABR")))return e;var i=t.getMediaInfo(),o=t.getMediaType(),c=t.getScheduleController(),l=t.getStreamInfo(),f=t.getAbrController(),h=f.getThroughputHistory(),d=l?l.id:null,g=l&&l.manifestInfo&&l.manifestInfo.isDynamic,E=t.useBufferOccupancyABR();if(e.reason=e.reason||{},!E)return e;c.setTimeToLoadDelay(0);var A=function(t){var e=t.getMediaType(),n=r[e];return n?0!==n.state&&p(n,e):(n=_(t),r[e]=n),n}(t);if(0===A.state)return e;var R,v=u.getCurrentBufferLevel(o),S=h.getAverageThroughput(o,g),b=h.getSafeAverageThroughput(o,g),I=h.getAverageLatency(o);if(e.reason.state=A.state,e.reason.throughput=S,e.reason.latency=I,isNaN(S))return e;switch(A.state){case 1:R=f.getQualityForBitrate(i,b,d,I),e.quality=R,e.reason.throughput=b,A.placeholderBuffer=Math.max(0,T(A,R)-v),A.lastQuality=R,!isNaN(A.lastSegmentDurationS)&&v>=A.lastSegmentDurationS&&(A.state=2);break;case 2:!function(t,e){var n=Date.now();if(isNaN(t.lastSegmentFinishTimeMs)){if(!isNaN(t.lastCallTimeMs)){var r=.001*(n-t.lastCallTimeMs);t.placeholderBuffer+=Math.max(0,r)}}else{var a=.001*(n-t.lastSegmentFinishTimeMs);t.placeholderBuffer+=Math.max(0,a)}t.lastCallTimeMs=n,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN,p(t,e)}(A,o),R=function(t,e){for(var n=t.bitrates.length,r=NaN,a=NaN,i=0;i<n;++i){var o=(t.Vp*(t.utilities[i]+t.gp)-e)/t.bitrates[i];(isNaN(a)||o>=a)&&(a=o,r=i)}return r}(A,v+A.placeholderBuffer);var N=f.getQualityForBitrate(i,b,d,I);R>A.lastQuality&&R>N&&(R=Math.max(N,A.lastQuality));var C=Math.max(0,v+A.placeholderBuffer-m(A,R));C<=A.placeholderBuffer?(A.placeholderBuffer-=C,C=0):(C-=A.placeholderBuffer,A.placeholderBuffer=0,R<f.getMaxAllowedIndexFor(o,d)?c.setTimeToLoadDelay(1e3*C):C=0),e.quality=R,e.reason.throughput=S,e.reason.latency=I,e.reason.bufferLevel=v,e.reason.placeholderBuffer=A.placeholderBuffer,e.reason.delay=C,A.lastQuality=R;break;default:n.debug("BOLA ABR rule invoked in bad state."),e.quality=f.getQualityForBitrate(i,b,d,I),e.reason.state=A.state,e.reason.throughput=b,e.reason.latency=I,A.state=1,y(A)}return e},reset:function(){O(),g.off(h.a.BUFFER_EMPTY,R,e),g.off(h.a.PLAYBACK_SEEKING,v,e),g.off(h.a.METRIC_ADDED,b,e),g.off(h.a.QUALITY_CHANGE_REQUESTED,N,e),g.off(h.a.FRAGMENT_LOADING_ABANDONED,C,e),g.off(l.a.MEDIA_FRAGMENT_LOADED,S,e)}},n=Object(f.a)(s).getInstance().getLogger(e),O(),g.on(h.a.BUFFER_EMPTY,R,e),g.on(h.a.PLAYBACK_SEEKING,v,e),g.on(h.a.METRIC_ADDED,b,e),g.on(h.a.QUALITY_CHANGE_REQUESTED,N,e),g.on(h.a.FRAGMENT_LOADING_ABANDONED,C,e),g.on(l.a.MEDIA_FRAGMENT_LOADED,S,e),e}R.__dashjs_factory_name="BolaRule";var v=r.a.getClassFactory(R);function S(t){t=t||{};var e,n,r,s,u=this.context,h=t.dashMetrics,d=Object(c.a)(u).getInstance();function g(t){var e={},n=t.getMediaInfo(),a=n.bitrateList.map((function(t){return t.bandwidth/1e3}));return e.state=1,e.bitrates=a,e.lastQuality=0,function(t){if(!t||!t.type)return;r[t.type]={},r[t.type].w=[],r[t.type].prev_w=[],r[t.type].Q=0,r[t.type].segment_request_start_s=0,r[t.type].segment_download_finish_s=0,r[t.type].B_target=1.5}(n),E(e),e}function E(t){t.placeholderBuffer=0,t.mostAdvancedSegmentStart=NaN,t.lastSegmentWasReplacement=!1,t.lastSegmentStart=NaN,t.lastSegmentDurationS=NaN,t.lastSegmentRequestTimeMs=NaN,t.lastSegmentFinishTimeMs=NaN}function _(){for(var t in n)if(n.hasOwnProperty(t)){var e=n[t];0!==e.state&&(e.state=1,E(e))}}function y(t){if(t&&t.chunk&&t.chunk.mediaInfo){var e=n[t.chunk.mediaInfo.type],a=r[t.chunk.mediaInfo.type];if(e&&0!==e.state){var i=t.chunk.start;isNaN(e.mostAdvancedSegmentStart)||i>e.mostAdvancedSegmentStart?(e.mostAdvancedSegmentStart=i,e.lastSegmentWasReplacement=!1):e.lastSegmentWasReplacement=!0,e.lastSegmentStart=i,e.lastSegmentDurationS=t.chunk.duration,e.lastQuality=t.chunk.quality,m(e,a)}}}function p(t){if(t&&t.metric===o.a.HTTP_REQUEST&&t.value&&t.value.type===A.a.MEDIA_SEGMENT_TYPE&&t.value.trace&&t.value.trace.length){var e=n[t.mediaType],a=r[t.mediaType];e&&0!==e.state&&(e.lastSegmentRequestTimeMs=t.value.trequest.getTime(),e.lastSegmentFinishTimeMs=t.value._tfinish.getTime(),m(e,a))}}function m(t,e){isNaN(t.lastSegmentStart)||isNaN(t.lastSegmentRequestTimeMs)||(e.segment_request_start_s=.001*t.lastSegmentRequestTimeMs,e.segment_download_finish_s=.001*t.lastSegmentFinishTimeMs,t.lastSegmentStart=NaN,t.lastSegmentRequestTimeMs=NaN)}function T(t){if(t&&t.mediaType){var e=n[t.mediaType];e&&0!==e.state&&(e.abrQuality=t.newQuality)}}function R(t,e){if(t.length!==e.length)return-1;for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function v(){n={},r={}}return e={getMaxIndex:function(t){var e,o=Object(a.a)(u).create(),c=Math.pow(4,.99),l=Math.max(Math.pow(4,1),c*Math.sqrt(4)),f=t.getMediaInfo(),d=t.getMediaType(),_=f.bitrateList.map((function(t){return t.bandwidth})),y=_.length,p=t.getScheduleController(),m=t.getStreamInfo(),T=t.getAbrController(),A=T.getThroughputHistory(),v=m&&m.manifestInfo&&m.manifestInfo.isDynamic,S=t.useL2AABR(),b=h.getCurrentBufferLevel(d,!0),I=A.getSafeAverageThroughput(d,v),N=A.getAverageThroughput(d,v),C=A.getAverageLatency(d),O=t.getVideoModel().getPlaybackRate();if(!(t&&t.hasOwnProperty("getMediaInfo")&&t.hasOwnProperty("getMediaType")&&t.hasOwnProperty("getScheduleController")&&t.hasOwnProperty("getStreamInfo")&&t.hasOwnProperty("getAbrController")&&t.hasOwnProperty("useL2AABR")))return o;if(o.reason=o.reason||{},!S||d===i.a.AUDIO)return o;p.setTimeToLoadDelay(0);var D=function(t){var e=t.getMediaType(),r=n[e];return r||(r=g(t),n[e]=r),r}(t);if(0===D.state)return o;var M=r[d];if(!M)return o;if(o.reason.state=D.state,o.reason.throughput=N,o.reason.latency=C,isNaN(N))return o;switch(D.state){case 1:if(e=T.getQualityForBitrate(f,I,m.id,C),o.quality=e,o.reason.throughput=I,D.lastQuality=e,!isNaN(D.lastSegmentDurationS)&&b>=M.B_target){D.state=2,M.Q=c;for(var L=0;L<y;++L)L===D.lastQuality?M.prev_w[L]=1:M.prev_w[L]=0}break;case 2:var w=[],P=h.getCurrentHttpRequest(d).trace.reduce((function(t,e){return t+e.d}),0),B=h.getCurrentHttpRequest(d).trace.reduce((function(t,e){return t+e.b[0]}),0),F=Math.round(8*B/P);F<1&&(F=1);for(var G=D.lastSegmentDurationS,U=1,x=0;x<y;++x)_[x]=_[x]/1e3,O*_[x]>F&&(U=-1),M.w[x]=M.prev_w[x]+U*(G/(2*l))*((M.Q+c)*(O*_[x]/F));M.w=function(t){for(var e=t.length,n=!1,r=[],a=0;a<e;++a)r[a]=t[a];for(var i=t.sort((function(t,e){return e-t})),o=0,s=0,u=[],c=0;c<e-1;++c)if((s=((o+=i[c])-1)/(c+1))>=i[c+1]){n=!0;break}n||(s=(o+i[e-1]-1)/e);for(var l=0;l<e;++l)u[l]=Math.max(r[l]-s,0);return u}(M.w);for(var j=0;j<y;++j)w[j]=M.w[j]-M.prev_w[j],M.prev_w[j]=M.w[j];M.Q=Math.max(0,M.Q-G+G*O*((R(_,M.prev_w)+R(_,w))/F));for(var H=[],k=0;k<y;++k)H[k]=Math.abs(_[k]-R(M.w,_));(e=H.indexOf(Math.min.apply(Math,H)))>D.lastQuality&&_[D.lastQuality+1]<=F&&(e=D.lastQuality+1),_[e]>=F&&(M.Q=2*Math.max(c,M.Q)),o.quality=e,o.reason.throughput=N,o.reason.latency=C,o.reason.bufferLevel=b,D.lastQuality=o.quality;break;default:s.debug("L2A ABR rule invoked in bad state."),o.quality=T.getQualityForBitrate(f,I,m.id,C),o.reason.state=D.state,o.reason.throughput=I,o.reason.latency=C,D.state=1,E(D)}return o},reset:function(){v(),d.off(l.a.PLAYBACK_SEEKING,_,e),d.off(l.a.MEDIA_FRAGMENT_LOADED,y,e),d.off(l.a.METRIC_ADDED,p,e),d.off(l.a.QUALITY_CHANGE_REQUESTED,T,e)}},s=Object(f.a)(u).getInstance().getLogger(e),v(),d.on(l.a.PLAYBACK_SEEKING,_,e),d.on(l.a.MEDIA_FRAGMENT_LOADED,y,e),d.on(l.a.METRIC_ADDED,p,e),d.on(l.a.QUALITY_CHANGE_REQUESTED,T,e),e}S.__dashjs_factory_name="L2ARule";var b=r.a.getClassFactory(S),I="manual_weight_selection",N="random_weight_selection",C="dynamic_weight_selection";function O(){var t,e,n,r,a,i,o,s,u,c=this.context;function l(){n=null,r=1,a=100,i=0,o=null,s=null,u=C}function h(){var t=0;if(n)for(var e=0;e<n.length;e++){var r=n[e];r.state.throughput>t&&(t=r.state.throughput)}return t}function d(t,e,n){var r=t.map((function(t,r){return n[r]*Math.pow(t-e[r],2)})).reduce((function(t,e){return t+e}));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function g(t,e,n){for(var r=0;r<e.length;r++){var a=e[r],i=(s=t,d([(o=a).state.throughput,o.state.latency,o.state.rebuffer,o.state.switch],[s.state.throughput,s.state.latency,s.state.rebuffer,s.state.switch],[1,1,1,1]));E(a,n,Math.exp(-1*Math.pow(i,2)/(2*Math.pow(.1,2))))}var o,s}function E(t,e,n){var r=t.state,a=[.01,.01,.01,.01];r.throughput=r.throughput+(e[0]-r.throughput)*a[0]*n,r.latency=r.latency+(e[1]-r.latency)*a[1]*n,r.rebuffer=r.rebuffer+(e[2]-r.rebuffer)*a[2]*n,r.switch=r.switch+(e[3]-r.switch)*a[3]*n}function _(t,e,n,r,a,i,u){o||(o=s[s.length-1]);var c=t.findWeightVector(e,n,r,a,i,u);null!==c&&-1!==c&&(o=c)}return t={getNextQuality:function(t,c,l,f,E,y,p){var m=l,T=f,A=c,R=function(t){if(!n){n=[];var e=t.bitrateList,a=[];i=e[0].bandwidth,e.forEach((function(t){a.push(t.bandwidth),t.bandwidth<i&&(i=t.bandwidth)})),c=a.map((function(t){return Math.pow(t,2)})).reduce((function(t,e){return t+e})),r=Math.sqrt(c);for(var o=0;o<e.length;o++){var u={qualityIndex:o,bitrate:e[o].bandwidth,state:{throughput:e[o].bandwidth/r,latency:0,rebuffer:0,switch:0}};n.push(u)}s=function(t){var e=[],n=function(t){for(var e=[],n=0;n<t;n++){var r=[Math.random()*h(),Math.random(),Math.random(),Math.random()];e.push(r)}return e}(Math.pow(t.length,2));e.push(n[0]);for(var r=[1,1,1,1],a=1;a<t.length;a++){for(var i=null,o=null,s=0;s<n.length;s++){for(var u=n[s],c=null,l=0;l<e.length;l++){var f=d(u,e[l],r);(null===c||f<c)&&(c=f)}(null===o||c>o)&&(i=u,o=c)}e.push(i)}for(var g=null,E=null,_=0;_<e.length;_++){for(var y=0,p=0;p<e.length;p++)_!==p&&(y+=d(e[_],e[p],r));(null===g||y>g)&&(g=y,E=_)}var m=[];m.push(e[E]),e.splice(E,1);for(;e.length>0;){for(var T=null,A=null,R=0;R<e.length;R++){var v=d(m[0],e[R],r);(null===T||v<T)&&(T=v,A=R)}m.push(e[A]),e.splice(A,1)}return m}(n)}var c;return n}(t),v=c/r;v>1&&(v=h()),l/=a,e.debug("getNextQuality called throughput:".concat(v," latency:").concat(l," bufferSize:").concat(f," currentQualityIndex:").concat(y," playbackRate:").concat(E));var S=R[y],b=S.bitrate*p.getSegmentDuration()/A,O=Math.max(0,b-T);if(T-b<p.getMinBuffer())return e.debug("Buffer is low for bitrate= ".concat(S.bitrate," downloadTime=").concat(b," currentBuffer=").concat(T," rebuffer=").concat(O)),function(t,e){var r=0,a=t;if(n)for(var i=0;i<n.length;i++){var o=n[i];o.bitrate<t.bitrate&&o.bitrate>r&&e>o.bitrate&&(r=o.bitrate,a=o)}return a}(S,A).qualityIndex;switch(u){case I:o=[.4,.4,.4,.4];break;case N:!function(t){o=function(t,e){for(var n=[],r=Math.sqrt(2/t),a=0;a<e;a++)n.push(Math.random()*r);return o=n}(t.length,4)}(R);break;case C:_(p,R,m,T,O,A,E);break;default:_(p,R,m,T,O,A,E)}for(var D=null,M=null,L=null,w=0;w<R.length;w++){var P=R[w],B=P.state,F=[B.throughput,B.latency,B.rebuffer,B.switch],G=o.slice(),U=p.getNextBufferWithBitrate(P.bitrate,T,A),x=U<p.getMinBuffer();x&&e.debug("Buffer is low for bitrate=".concat(P.bitrate," downloadTime=").concat(b," currentBuffer=").concat(T," nextBuffer=").concat(U)),(P.bitrate>c-1e4||x)&&P.bitrate!==i&&(G[0]=100);var j=d(F,[v,0,0,0],G);(null===D||j<D)&&(D=j,M=P.qualityIndex,L=P)}var H=Math.abs(S.bitrate-L.bitrate)/r;return g(S,R,[v,l,O,H]),g(L,R,[v,0,0,H]),M},reset:function(){l()}},e=Object(f.a)(c).getInstance().getLogger(t),l(),t}O.__dashjs_factory_name="LearningAbrController";var D=r.a.getClassFactory(O);var M=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0};function L(){var t,e,n,r,a;function i(){e=null,n=null,r=null,a=null}function o(t,e,n,r){var a=new M;return a.type=t,a.weights.bitrateReward=e||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=r||200,a}function s(t,e,n,r,a){a.bitrateWSum+=a.weights.bitrateReward*t,a.lastBitrate&&(a.bitrateSwitchWSum+=a.weights.bitrateSwitchPenalty*Math.abs(t-a.lastBitrate)),a.lastBitrate=t,a.rebufferWSum+=a.weights.rebufferPenalty*e;for(var i=0;i<a.weights.latencyPenalty.length;i++){var o=a.weights.latencyPenalty[i];if(n<=o.threshold){a.latencyWSum+=o.penalty*n;break}}a.playbackSpeedWSum+=a.weights.playbackSpeedPenalty*Math.abs(1-r),a.totalQoe=a.bitrateWSum-a.bitrateSwitchWSum-a.rebufferWSum-a.latencyWSum-a.playbackSpeedWSum}return t={setupPerSegmentQoe:function(t,i,s){e=o("segment",t,i,s),n=t,r=i,a=s},logSegmentMetrics:function(t,n,r,a){e&&s(t,n,r,a,e)},getPerSegmentQoe:function(){return e},calculateSingleUseQoe:function(t,e,i,u){var c=null;return n&&r&&a&&(c=o("segment",n,r,a)),c?(s(t,e,i,u,c),c.totalQoe):0},reset:function(){i()}},i(),t}L.__dashjs_factory_name="LoLpQoeEvaluator";var w=r.a.getClassFactory(L);function P(t){var e,n,r,a,i,o=t.targetLatency,s=t.bufferMin,u=t.segmentDuration,c=t.qoeEvaluator;function l(){return u}function f(t,e){var n=l();return e>n?t-n:t+n-e}return e={getMinBuffer:function(){return s},getSegmentDuration:l,getNextBufferWithBitrate:function(t,e,n){return f(e,t*u/n)},getNextBuffer:f,findWeightVector:function(t,e,a,i,l,h){var d=null,g=null,E=null,_=Math.abs(e-r);return t.forEach((function(t){n.forEach((function(n){n[0];var r=n[1],i=n[2],y=(n[3],t.bitrate*u/l),p=f(a,y),m=(0===i?10:1/i)*Math.max(1e-5,y-p),T=(0===r?10:1/r)*t.state.latency,A=c.calculateSingleUseQoe(t.bitrate,m,T,h);(null===d||A>d)&&function(t,e,n){if(t>o+n)return!1;return e>=s}(e,p,_)&&(d=A,g=n,E=t.bitrate)}))})),null===g&&null===E&&(g=-1),r=e,g}},a=[.2,.4,.6,.8,1],i=4,n=function t(e,n,r){if(r===n)return e;for(var i=e.length,o=0;o<i;o++)for(var s=e.shift(),u=0;u<a.length;u++)e.push(s.concat(a[u]));return t(e,n,r+1)}(a.map((function(t){return[t]})),i,1),r=0,e}P.__dashjs_factory_name="LoLpWeightSelector";var B=r.a.getClassFactory(P);function F(t){var e,n,r,s,u=(t=t||{}).dashMetrics,c=this.context;return n={getMaxIndex:function(t){try{var n=Object(a.a)(c).create(),l=t.getMediaInfo().type,f=t.getAbrController(),h=t.getStreamInfo(),d=f.getQualityFor(l,h.id),g=t.getMediaInfo(),E=u.getCurrentBufferState(l),_=t.getScheduleController(),y=u.getCurrentBufferLevel(l,!0),p=h&&h.manifestInfo?h.manifestInfo.isDynamic:null,m=_.getPlaybackController(),T=m.getCurrentLiveLatency();if(!t.useLoLPABR()||l===i.a.AUDIO)return n;T||(T=0);var A=m.getPlaybackRate(),R=f.getThroughputHistory().getSafeAverageThroughput(l,p);if(e.debug("Throughput ".concat(Math.round(R)," kbps")),isNaN(R)||!E)return n;if(f.getAbandonmentStateFor(h.id,l)===o.a.ABANDON_LOAD)return n;for(var v=g.bitrateList,S=t.getRepresentationInfo().fragmentDuration,b=v[0].bandwidth/1e3,I=v[v.length-1].bandwidth/1e3,N=0;N<v.length;N++){var C=v[N].bandwidth/1e3;C>I?I=C:C<b&&(b=C)}var O=v[d].bandwidth/1e3,D=u.getCurrentHttpRequest(l,!0),M=(D.tresponse.getTime()-D.trequest.getTime())/1e3,L=M>S?M-S:0;s.setupPerSegmentQoe(S,I,b),s.logSegmentMetrics(O,L,T,A);var w=B(c).create({targetLatency:1.5,bufferMin:.3,segmentDuration:S,qoeEvaluator:s});return n.quality=r.getNextQuality(g,1e3*R,T,y,A,d,w),n.reason={throughput:R,latency:T},n.priority=a.a.PRIORITY.STRONG,_.setTimeToLoadDelay(0),n.quality!==d&&console.log("[TgcLearningRule]["+l+"] requesting switch to index: ",n.quality,"Average throughput",Math.round(R),"kbps"),n}catch(t){throw t}},reset:function(){r.reset(),s.reset()}},e=Object(f.a)(c).getInstance().getLogger(n),r=D(c).create(),s=w(c).create(),n}F.__dashjs_factory_name="LoLPRule";var G=r.a.getClassFactory(F);function U(t){t=t||{};var e,n,r=this.context,o=t.mediaPlayerModel,s=t.customParametersModel,c=t.dashMetrics,l=t.settings;function f(t){return t.filter((function(t){return t.quality>a.a.NO_CHANGE}))}function h(t){var e,n,i,o,s,u={},c=null;if(0!==t.length){for(u[a.a.PRIORITY.STRONG]={quality:a.a.NO_CHANGE,reason:null},u[a.a.PRIORITY.WEAK]={quality:a.a.NO_CHANGE,reason:null},u[a.a.PRIORITY.DEFAULT]={quality:a.a.NO_CHANGE,reason:null},e=0,n=t.length;e<n;e+=1)(i=t[e]).quality!==a.a.NO_CHANGE&&(u[i.priority].quality===a.a.NO_CHANGE||u[i.priority].quality>i.quality)&&(u[i.priority].quality=i.quality,u[i.priority].reason=i.reason||null);return u[a.a.PRIORITY.WEAK].quality!==a.a.NO_CHANGE&&(c=u[a.a.PRIORITY.WEAK]),u[a.a.PRIORITY.DEFAULT].quality!==a.a.NO_CHANGE&&(c=u[a.a.PRIORITY.DEFAULT]),u[a.a.PRIORITY.STRONG].quality!==a.a.NO_CHANGE&&(c=u[a.a.PRIORITY.STRONG]),c&&(o=c.quality,s=c.reason),Object(a.a)(r).create(o,s)}}return{initialize:function(){e=[],n=[],l.get().streaming.abr.useDefaultABRRules&&(l.get().streaming.abr.ABRStrategy===i.a.ABR_STRATEGY_L2A?e.push(b(r).create({dashMetrics:c,settings:l})):l.get().streaming.abr.ABRStrategy===i.a.ABR_STRATEGY_LoLP?e.push(G(r).create({dashMetrics:c})):(e.push(v(r).create({dashMetrics:c,mediaPlayerModel:o,settings:l})),e.push(u(r).create({dashMetrics:c})),l.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&e.push(g(r).create({dashMetrics:c,settings:l})),l.get().streaming.abr.additionalAbrRules.switchHistoryRule&&e.push(T(r).create()),l.get().streaming.abr.additionalAbrRules.droppedFramesRule&&e.push(p(r).create()),l.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push(_(r).create({dashMetrics:c,mediaPlayerModel:o,settings:l})))),s.getAbrCustomRules().forEach((function(t){"qualitySwitchRules"===t.type&&e.push(t.rule(r).create()),"abandonFragmentRules"===t.type&&n.push(t.rule(r).create())}))},reset:function(){[e,n].forEach((function(t){t&&t.length&&t.forEach((function(t){return t.reset&&t.reset()}))})),e=[],n=[]},getMaxQuality:function(t){return h(f(e.map((function(e){return e.getMaxIndex(t)}))))||Object(a.a)(r).create()},getMinSwitchRequest:h,shouldAbandonFragment:function(t,e){return h(f(n.map((function(n){return n.shouldAbandon(t,e)}))))||Object(a.a)(r).create()},getQualitySwitchRules:function(){return e}}}U.__dashjs_factory_name="ABRRulesCollection";var x=r.a.getClassFactory(U);x.QUALITY_SWITCH_RULES="qualitySwitchRules",x.ABANDON_FRAGMENT_RULES="abandonFragmentRules",r.a.updateSingletonFactory(U.__dashjs_factory_name,x);e.a=x},3:function(t,e,n){"use strict";var r=function(){var t,e=[],n={},r={};function a(t,n){for(var r in e){var a=e[r];if(a.context===t&&a.name===n)return a.instance}return null}function i(t,e){return e[t]}function o(t,e,n){t in n&&(n[t]=e)}function s(e,n,r){var a,i=e.__dashjs_factory_name,o=n[i];if(o){var s=o.instance;if(!o.override)return s.apply({context:n,factory:t},r);for(var u in a=e.apply({context:n},r),s=s.apply({context:n,factory:t,parent:a},r))a.hasOwnProperty(u)&&(a[u]=s[u])}else a=e.apply({context:n},r);return a.getClassName=function(){return i},a}return t={extend:function(t,e,n,r){!r[t]&&e&&(r[t]={instance:e,override:n})},getSingletonInstance:a,setSingletonInstance:function(t,n,r){for(var a in e){var i=e[a];if(i.context===t&&i.name===n)return void(e[a].instance=r)}e.push({name:n,context:t,instance:r})},deleteSingletonInstances:function(t){e=e.filter((function(e){return e.context!==t}))},getSingletonFactory:function(t){var r=i(t.__dashjs_factory_name,n);return r||(r=function(n){var r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=a(n,t.__dashjs_factory_name)),r||(r=s(t,n,arguments),e.push({name:t.__dashjs_factory_name,context:n,instance:r})),r}}},n[t.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(t){return i(t,n)},updateSingletonFactory:function(t,e){o(t,e,n)},getClassFactory:function(t){var e=i(t.__dashjs_factory_name,r);return e||(e=function(e){return void 0===e&&(e={}),{create:function(){return s(t,e,arguments)}}},r[t.__dashjs_factory_name]=e),e},getClassFactoryByName:function(t){return i(t,r)},updateClassFactory:function(t,e){o(t,e,r)}}}();e.a=r},30:function(t,e,n){"use strict";e.a=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value=""}},31:function(t,e,n){"use strict";var r=n(30),a=n(3),i=n(16),o=n(14),s=n(27),u=n(1);function c(){var t,e,n,a,c,l,f,h,d=this.context,g=Object(i.a)(d).getInstance();function E(){a=[],c=[],l=[],h=[],f=null,e=[]}function _(t,e){var n=-1;t.some((function(t,r){if(t===e)return n=r,!0})),n<0||t.splice(n,1)}function y(t){var e;for(e=0;e<h.length;e++)if(h[e].rulename===t)return e;return-1}function p(t,n){m(t,n);var a=new r.a;a.schemeIdUri=t,a.value=n,e.push(a)}function m(t,n){Object(o.b)(t,"string"),Object(o.b)(n,"string"),e.forEach((function(r,a){r.schemeIdUri===t&&r.value===n&&e.splice(a,1)}))}return t={getCustomInitialTrackSelectionFunction:function(){return f},setCustomInitialTrackSelectionFunction:function(t){f=t},resetCustomInitialTrackSelectionFunction:function(){f=null},getLicenseResponseFilters:function(){return c},getLicenseRequestFilters:function(){return a},getCustomCapabilitiesFilters:function(){return l},registerCustomCapabilitiesFilter:function(t){l.push(t)},registerLicenseResponseFilter:function(t){c.push(t)},registerLicenseRequestFilter:function(t){a.push(t)},unregisterCustomCapabilitiesFilter:function(t){_(l,t)},unregisterLicenseResponseFilter:function(t){_(c,t)},unregisterLicenseRequestFilter:function(t){_(a,t)},addAbrCustomRule:function(t,e,n){if("string"!=typeof t||t!==s.a.ABANDON_FRAGMENT_RULES&&t!==s.a.QUALITY_SWITCH_RULES||"string"!=typeof e)throw u.a.BAD_ARGUMENT_ERROR;var r=y(e);-1===r?h.push({type:t,rulename:e,rule:n}):(h[r].type=t,h[r].rule=n)},removeAllAbrCustomRule:function(){h=[]},removeAbrCustomRule:function(t){if(t){var e=y(t);-1!==e&&h.splice(e,1)}else h=[]},getAbrCustomRules:function(){return h},addUTCTimingSource:p,removeUTCTimingSource:m,getUTCTimingSources:function(){return e},clearDefaultUTCTimingSources:function(){e=[]},restoreDefaultUTCTimingSources:function(){var t=g.get().streaming.utcSynchronization.defaultTimingSource;p(t.scheme,t.value)},setXHRWithCredentialsForType:function t(e,r){e?n[e]=!!r:Object.keys(n).forEach((function(e){t(e,r)}))},getXHRWithCredentialsForType:function(t){var e=n[t];return void 0===e?n.default:e},setConfig:function(){},reset:function(){E()}},n={default:!1},E(),t}c.__dashjs_factory_name="CustomParametersModel",e.a=a.a.getSingletonFactory(c)},36:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var a=t[r];"."===a?t.splice(r,1):".."===a?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,a="/"===o.charAt(0))}return(a?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!a).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===a(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var a=r(t.split("/")),i=r(n.split("/")),o=Math.min(a.length,i.length),s=o,u=0;u<o;u++)if(a[u]!==i[u]){s=u;break}var c=[];for(u=s;u<a.length;u++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,a=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,r=-1,a=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!a){n=e+1;break}}else-1===r&&(a=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,r=-1,a=!0,i=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(a=!1,r=o+1),46===s?-1===e?e=o:1!==i&&(i=1):-1!==e&&(i=-1);else if(!a){n=o+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(25))},4:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u=new(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(n,t);var e=i(n);function n(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(t=e.call(this)).AST_IN_FUTURE="astInFuture",t.BUFFER_EMPTY="bufferStalled",t.BUFFER_LOADED="bufferLoaded",t.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",t.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",t.DYNAMIC_TO_STATIC="dynamicToStatic",t.ERROR="error",t.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",t.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",t.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",t.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",t.LOG="log",t.MANIFEST_LOADED="manifestLoaded",t.METRICS_CHANGED="metricsChanged",t.METRIC_CHANGED="metricChanged",t.METRIC_ADDED="metricAdded",t.METRIC_UPDATED="metricUpdated",t.PERIOD_SWITCH_STARTED="periodSwitchStarted",t.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",t.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",t.QUALITY_CHANGE_RENDERED="qualityChangeRendered",t.TRACK_CHANGE_RENDERED="trackChangeRendered",t.STREAM_INITIALIZING="streamInitializing",t.STREAM_UPDATED="streamUpdated",t.STREAM_ACTIVATED="streamActivated",t.STREAM_DEACTIVATED="streamDeactivated",t.STREAM_INITIALIZED="streamInitialized",t.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",t.TEXT_TRACKS_ADDED="allTextTracksAdded",t.TEXT_TRACK_ADDED="textTrackAdded",t.TTML_PARSED="ttmlParsed",t.TTML_TO_PARSE="ttmlToParse",t.CAPTION_RENDERED="captionRendered",t.CAPTION_CONTAINER_RESIZE="captionContainerResize",t.CAN_PLAY="canPlay",t.CAN_PLAY_THROUGH="canPlayThrough",t.PLAYBACK_ENDED="playbackEnded",t.PLAYBACK_ERROR="playbackError",t.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",t.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",t.PLAYBACK_LOADED_DATA="playbackLoadedData",t.PLAYBACK_PAUSED="playbackPaused",t.PLAYBACK_PLAYING="playbackPlaying",t.PLAYBACK_PROGRESS="playbackProgress",t.PLAYBACK_RATE_CHANGED="playbackRateChanged",t.PLAYBACK_SEEKED="playbackSeeked",t.PLAYBACK_SEEKING="playbackSeeking",t.PLAYBACK_STALLED="playbackStalled",t.PLAYBACK_STARTED="playbackStarted",t.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",t.PLAYBACK_WAITING="playbackWaiting",t.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",t.EVENT_MODE_ON_START="eventModeOnStart",t.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",t.CONFORMANCE_VIOLATION="conformanceViolation",t.REPRESENTATION_SWITCH="representationSwitch",t.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",t}return n}(n(18).a));e.a=u},49:function(t,e,n){"use strict";var r=n(3),a=n(14);function i(){return{customTimeRangeArray:[],length:0,add:function(t,e){var n=0;for(n=0;n<this.customTimeRangeArray.length&&t>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:t,end:e}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(t,e){for(var n=0;n<this.customTimeRangeArray.length;n++)if(t<=this.customTimeRangeArray[n].start&&e>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(t>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:e,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=t;break}t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=t:e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=e)}this.length=this.customTimeRangeArray.length},mergeRanges:function(t,e){var n=this.customTimeRangeArray[t],r=this.customTimeRangeArray[e];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(e,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(t,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(e,1),!0)},start:function(t){return Object(a.a)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].start},end:function(t){return Object(a.a)(t),t>=this.customTimeRangeArray.length||t<0?NaN:this.customTimeRangeArray[t].end}}}i.__dashjs_factory_name="CustomTimeRanges",e.a=r.a.getClassFactory(i)},5:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));var a=function t(){r(this,t),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null},i=function t(){r(this,t),this.s=null,this.d=null,this.b=[],this._t=null};a.GET="GET",a.HEAD="HEAD",a.MPD_TYPE="MPD",a.XLINK_EXPANSION_TYPE="XLinkExpansion",a.INIT_SEGMENT_TYPE="InitializationSegment",a.INDEX_SEGMENT_TYPE="IndexSegment",a.MEDIA_SEGMENT_TYPE="MediaSegment",a.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",a.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",a.DVB_REPORTING_TYPE="DVBReporting",a.LICENSE="license",a.OTHER_TYPE="other"},6:function(t,e,n){"use strict";var r=n(7),a=n(2),i=n(3),o=1,s=2,u=3,c=4,l=5;function f(t){t=t||{};var e,n,i,f,h=this.context,d=Object(r.a)(h).getInstance(),g=t.settings,E=[];function _(t){return t&&t.bind?t.bind(window.console):window.console.log.bind(window.console)}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.apply(void 0,[o,this].concat(e))}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.apply(void 0,[s,this].concat(e))}function m(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.apply(void 0,[u,this].concat(e))}function T(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.apply(void 0,[c,this].concat(e))}function A(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];R.apply(void 0,[l,this].concat(e))}function R(t,e){var r="",o=null;n&&(o=(new Date).getTime(),r+="["+(o-f)+"]"),i&&e&&e.getClassName&&(r+="["+e.getClassName()+"]",e.getType&&(r+="["+e.getType()+"]")),r.length>0&&(r+=" ");for(var s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];Array.apply(null,u).forEach((function(t){r+=t+" "})),E[t]&&g.get().debug.logLevel>=t&&E[t](r),g&&g.get().debug.dispatchEvent&&d.trigger(a.a.LOG,{message:r,level:t})}return e={getLogger:function(t){return{fatal:y.bind(t),error:p.bind(t),warn:m.bind(t),info:T.bind(t),debug:A.bind(t)}},setLogTimestampVisible:function(t){n=t},setCalleeNameVisible:function(t){i=t}},n=!0,i=!0,f=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(E[o]=_(window.console.error),E[s]=_(window.console.error),E[u]=_(window.console.warn),E[c]=_(window.console.info),E[l]=_(window.console.debug)),e}f.__dashjs_factory_name="Debug";var h=i.a.getSingletonFactory(f);h.LOG_LEVEL_NONE=0,h.LOG_LEVEL_FATAL=o,h.LOG_LEVEL_ERROR=s,h.LOG_LEVEL_WARNING=u,h.LOG_LEVEL_INFO=c,h.LOG_LEVEL_DEBUG=l,i.a.updateSingletonFactory(f.__dashjs_factory_name,h),e.a=h},7:function(t,e,n){"use strict";var r=n(3),a=n(4);function i(){var t={};function e(e,n,r){var a=-1;return t[e]?(t[e].some((function(t,e){if(t&&t.callback===n&&(!r||r===t.scope))return a=e,!0})),a):a}return{on:function(n,r,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var o=i.priority||0;if(!(e(n,r,a)>=0)){t[n]=t[n]||[];var s={callback:r,scope:a,priority:o};a&&a.getStreamId&&(s.streamId=a.getStreamId()),a&&a.getType&&(s.mediaType=a.getType()),i&&i.mode&&(s.mode=i.mode);var u=t[n].some((function(e,r){if(e&&o>e.priority)return t[n].splice(r,0,s),!0}));u||t[n].push(s)}},off:function(n,r,a){if(n&&r&&t[n]){var i=e(n,r,a);i<0||(t[n][i]=null)}},trigger:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e&&t[e]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=e,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),t[e].filter((function(t){return!!t&&((!r.streamId||!t.streamId||t.streamId===r.streamId)&&((!r.mediaType||!t.mediaType||t.mediaType===r.mediaType)&&!(r.mode&&t.mode&&t.mode!==r.mode||!t.mode&&r.mode&&r.mode===a.a.EVENT_MODE_ON_RECEIVE)))})).forEach((function(t){return t&&t.callback.call(t.scope,n)}))}},reset:function(){t={}}}}i.__dashjs_factory_name="EventBus";var o=r.a.getSingletonFactory(i);o.EVENT_PRIORITY_LOW=0,o.EVENT_PRIORITY_HIGH=5e3,r.a.updateSingletonFactory(i.__dashjs_factory_name,o),e.a=o},76:function(t,e,n){"use strict";n.r(e);var r=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var a=r,i=n(19);function o(t){var e,n,r=(t=t||{}).eventBus,o=t.dashMetrics,s=t.metricsConstants,u=t.events;function c(t){var e=new a;if(n){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.mpdurl||(e.mpdurl=n.originalUrl||n.url),e.terror||(e.terror=new Date),o.addDVBErrors(e)}}function l(t){t.error||(n=t.manifest)}function f(t){c({errorcode:a.BASE_URL_CHANGED,servicelocation:t.entry})}function h(){c({errorcode:a.BECAME_REPORTER})}function d(t){switch(t.metric){case s.HTTP_REQUEST:(0===(e=t.value).responsecode||null==e.responsecode||e.responsecode>=400||e.responsecode<100||e.responsecode>=600)&&c({errorcode:e.responsecode||a.CONNECTION_ERROR,url:e.url,terror:e.tresponse,servicelocation:e._serviceLocation})}var e}function g(t){var e;switch(t.error?t.error.code:0){case MediaError.MEDIA_ERR_NETWORK:e=a.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:e=a.CORRUPT_MEDIA_OTHER;break;default:return}c({errorcode:e})}return e={initialise:function(){r.on(u.MANIFEST_UPDATED,l,e),r.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),r.on(u.METRIC_ADDED,d,e),r.on(u.METRIC_UPDATED,d,e),r.on(u.PLAYBACK_ERROR,g,e),r.on(i.a.BECAME_REPORTING_PLAYER,h,e)},reset:function(){r.off(u.MANIFEST_UPDATED,l,e),r.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),r.off(u.METRIC_ADDED,d,e),r.off(u.METRIC_UPDATED,d,e),r.off(u.PLAYBACK_ERROR,g,e),r.off(i.a.BECAME_REPORTING_PLAYER,h,e)}}}o.__dashjs_factory_name="DVBErrorsTranslator";var s=dashjs.FactoryMaker.getSingletonFactory(o),u=n(49);function c(t){t=t||{};var e,n,r=!1,a=this.context,i=t.mediaElement;return e={initialize:function(t){t&&t.length&&(t.forEach((function(t){var e=t.starttime,r=e+t.duration;n.add(e,r)})),r=!!t[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){var t,e=n.length;if(!e)return!0;t=r?(new Date).getTime()/1e3:i.currentTime;for(var a=0;a<e;a+=1){var o=n.start(a),s=n.end(a);if(o<=t&&t<s)return!0}return!1}},n=Object(u.a)(a).create(),e}c.__dashjs_factory_name="RangeController";var l=dashjs.FactoryMaker.getClassFactory(c);function f(){return{serialise:function t(e){var n,r,a=[],i=[];for(n in e)if(e.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(r=e[n])&&(r=""),Array.isArray(r)){if(!r.length)continue;i=[],r.forEach((function(e){var n="Object"!==Object.prototype.toString.call(e).slice(8,-1);i.push(n?e:t(e))})),r=i.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));a.push(n+"="+r)}return a.join("&")}}}f.__dashjs_factory_name="MetricSerialiser";var h=dashjs.FactoryMaker.getSingletonFactory(f);function d(){var t,e,n,r=window.crypto||window.msCrypto,a=Uint32Array,i=Math.pow(2,8*a.BYTES_PER_ELEMENT)-1;function o(){r&&(t||(t=new a(10)),r.getRandomValues(t),e=0)}return n={random:function(n,a){var s;return n||(n=0),a||(a=1),r?(e===t.length&&o(),s=t[e]/i,e+=1):s=Math.random(),s*(a-n)+n}},o(),n}d.__dashjs_factory_name="RNG";var g=dashjs.FactoryMaker.getSingletonFactory(d),E=n(31);function _(t){var e;t=t||{};var n,r,a,i,o,s,u,c=this.context,l=[],f=t.metricsConstants;function d(){i=!1,o=!1,s=null,u=null}return e={report:function(t,e){Array.isArray(e)||(e=[e]),o&&u.isEnabled()&&e.forEach((function(e){var a=n.serialise(e);t!==f.DVB_ERRORS&&(a="metricname=".concat(t,"&").concat(a)),function(t,e,n){var a=new XMLHttpRequest;a.withCredentials=r.getXHRWithCredentialsForType(f.HTTP_REQUEST_DVB_REPORTING_TYPE);var i=function(){var t=l.indexOf(a);-1!==t&&(l.splice(t,1),a.status>=200&&a.status<300?e&&e():n&&n())};l.push(a);try{a.open("GET",t),a.onloadend=i,a.onerror=i,a.send()}catch(t){a.onerror()}}(a="".concat(s,"?").concat(a),null,(function(){o=!1}))}))},initialize:function(t,e){var n;if(u=e,!(s=t.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");i||((n=t.dvb_probability)&&(1e3===n||n/1e3>=a.random())&&(o=!0),i=!0)},reset:function(){d()}},n=h(c).getInstance(),a=g(c).getInstance(),r=Object(E.a)(c).getInstance(),d(),e}_.__dashjs_factory_name="DVBReporting";var y=dashjs.FactoryMaker.getClassFactory(_);function p(t){t=t||{};var e,n={"urn:dvb:dash:reporting:2014":y},r=this.context,a=t.debug?t.debug.getLogger(e):{},i=t.metricsConstants,o=t.mediaPlayerModel||{};return e={create:function(t,e){var s;try{(s=n[t.schemeIdUri](r).create({metricsConstants:i,mediaPlayerModel:o})).initialize(t,e)}catch(e){s=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(t.schemeIdUri," (").concat(e.message,")"))}return s},register:function(t,e){n[t]=e},unregister:function(t){delete n[t]}}}p.__dashjs_factory_name="ReportingFactory";var m=dashjs.FactoryMaker.getSingletonFactory(p);function T(t){var e=[],n=m(this.context).getInstance(t);return{initialize:function(t,r){t.some((function(t){var a=n.create(t,r);if(a)return e.push(a),!0}))},reset:function(){e.forEach((function(t){return t.reset()})),e=[]},report:function(t,n){e.forEach((function(e){return e.report(t,n)}))}}}T.__dashjs_factory_name="ReportingController";var A=dashjs.FactoryMaker.getClassFactory(T);function R(){return{reconstructFullMetricName:function(t,e,n){var r=t;return e&&(r+="("+e,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(t){if(!t)throw new Error("missing n");if(isNaN(t))throw new Error("n is NaN");if(t<0)throw new Error("n must be positive");return t}}}R.__dashjs_factory_name="HandlerHelpers";var v=dashjs.FactoryMaker.getSingletonFactory(R);function S(t){var e,n,r,a,i;t=t||{};var o=this.context,s=v(o).getInstance(),u=[],c=t.metricsConstants;function l(){var t=function(){try{return Object.keys(u).map((function(t){return u[t]})).reduce((function(t,e){return t.level<e.level?t:e}))}catch(t){return}}();t&&i!==t.t&&(i=t.t,e.report(r,t))}return{initialize:function(t,i,o){i&&(n=s.validateN(o),e=i,r=s.reconstructFullMetricName(t,o),a=setInterval(l,n))},reset:function(){clearInterval(a),a=null,n=0,e=null,i=null},handleNewMetric:function(t,e,n){t===c.BUFFER_LEVEL&&(u[n]=e)}}}S.__dashjs_factory_name="BufferLevelHandler";var b=dashjs.FactoryMaker.getClassFactory(S);var I=dashjs.FactoryMaker.getClassFactory((function(t){var e,n=(t=t||{}).eventBus,r=t.metricsConstants;function a(){n.off(i.a.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(i.a.BECAME_REPORTING_PLAYER)}return{initialize:function(t,r){r&&(e=r,n.on(i.a.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){e=null},handleNewMetric:function(t,n){t===r.DVB_ERRORS&&e&&e.report(t,n)}}}));function N(t){var e,n,r,a,i;t=t||{};var o=[],s=v(this.context).getInstance(),u=t.metricsConstants;function c(){var t=o;t.length&&e&&e.report(a,t),o=[]}return{initialize:function(t,o,u,l){o&&(n=s.validateN(u),e=o,l&&l.length&&(r=l),a=s.reconstructFullMetricName(t,u,l),i=setInterval(c,n))},reset:function(){clearInterval(i),i=null,n=null,r=null,o=[],e=null},handleNewMetric:function(t,e){t===u.HTTP_REQUEST&&(r&&r!==e.type||o.push(e))}}}N.__dashjs_factory_name="HttpListHandler";var C=dashjs.FactoryMaker.getClassFactory(N);function O(){var t,e;return{initialize:function(n,r){t=n,e=r},reset:function(){e=null,t=void 0},handleNewMetric:function(n,r){n===t&&e&&e.report(t,r)}}}O.__dashjs_factory_name="GenericMetricHandler";var D=dashjs.FactoryMaker.getClassFactory(O);function M(t){var e,n=(t=t||{}).debug?t.debug.getLogger(e):{},r=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,a=this.context,i={BufferLevel:b,DVBErrors:I,HttpList:C,PlayList:D,RepSwitchList:D,TcpList:D};return e={create:function(e,o){var s,u=e.match(r);if(u){try{(s=i[u[1]](a).create({eventBus:t.eventBus,metricsConstants:t.metricsConstants})).initialize(u[1],o,u[3],u[5])}catch(t){s=null,n.error("MetricsHandlerFactory: Could not create handler for type ".concat(u[1]," with args ").concat(u[3],", ").concat(u[5]," (").concat(t.message,")"))}return s}},register:function(t,e){i[t]=e},unregister:function(t){delete i[t]}}}M.__dashjs_factory_name="MetricsHandlerFactory";var L=dashjs.FactoryMaker.getSingletonFactory(M);function w(t){t=t||{};var e,n=[],r=this.context,a=t.eventBus,i=t.events,o=L(r).getInstance({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants});function s(t){n.forEach((function(e){e.handleNewMetric(t.metric,t.value,t.mediaType)}))}return e={initialize:function(t,r){t.split(",").forEach((function(t,e,a){var i;if(-1!==t.indexOf("(")&&-1===t.indexOf(")")){var s=a[e+1];s&&-1===s.indexOf("(")&&-1!==s.indexOf(")")&&(t+=","+s,delete a[e+1])}(i=o.create(t,r))&&n.push(i)})),a.on(i.METRIC_ADDED,s,e),a.on(i.METRIC_UPDATED,s,e)},reset:function(){a.off(i.METRIC_ADDED,s,e),a.off(i.METRIC_UPDATED,s,e),n.forEach((function(t){return t.reset()})),n=[]}}}w.__dashjs_factory_name="MetricsHandlersController";var P=dashjs.FactoryMaker.getClassFactory(w);function B(t){var e,n,r;t=t||{};var a=this.context;function i(){e&&e.reset(),n&&n.reset(),r&&r.reset()}return{initialize:function(o){try{(r=l(a).create({mediaElement:t.mediaElement})).initialize(o.Range),(n=A(a).create({debug:t.debug,metricsConstants:t.metricsConstants,mediaPlayerModel:t.mediaPlayerModel})).initialize(o.Reporting,r),(e=P(a).create({debug:t.debug,eventBus:t.eventBus,metricsConstants:t.metricsConstants,events:t.events})).initialize(o.metrics,n)}catch(t){throw i(),t}},reset:i}}B.__dashjs_factory_name="MetricsController";var F=dashjs.FactoryMaker.getClassFactory(B);var G=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.metrics="",this.Range=[],this.Reporting=[]};var U=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1};var x=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3};function j(t){var e=(t=t||{}).adapter,n=t.constants;return{getMetrics:function(t){var r=[];return t&&t.Metrics_asArray&&t.Metrics_asArray.forEach((function(a){var i=new G,o=e.getIsDynamic(t);a.hasOwnProperty("metrics")&&(i.metrics=a.metrics,a.Range_asArray&&a.Range_asArray.forEach((function(r){var a=new U;a.starttime=function(t,r,a){var i,o,s=0;return r?s=e.getAvailabilityStartTime(t)/1e3:(i=e.getRegularPeriods(t)).length&&(s=i[0].start),o=s,a&&a.hasOwnProperty(n.START_TIME)&&(o+=a.starttime),o}(t,o,r),r.hasOwnProperty("duration")?a.duration=r.duration:a.duration=e.getDuration(t),a._useWallClockTime=o,i.Range.push(a)})),a.Reporting_asArray&&(a.Reporting_asArray.forEach((function(t){var e=new x;t.hasOwnProperty(n.SCHEME_ID_URI)&&(e.schemeIdUri=t.schemeIdUri,t.hasOwnProperty("value")&&(e.value=t.value),t.hasOwnProperty(n.DVB_REPORTING_URL)&&(e.dvb_reportingUrl=t[n.DVB_REPORTING_URL]),t.hasOwnProperty(n.DVB_PROBABILITY)&&(e.dvb_probability=t[n.DVB_PROBABILITY]),i.Reporting.push(e))})),r.push(i)))})),r}}}j.__dashjs_factory_name="ManifestParsing";var H=dashjs.FactoryMaker.getSingletonFactory(j);function k(t){var e;t=t||{};var n={},r=this.context,a=t.eventBus,o=t.events;function s(e){if(!e.error){var o=Object.keys(n);H(r).getInstance({adapter:t.adapter,constants:t.constants}).getMetrics(e.manifest).forEach((function(e){var a=JSON.stringify(e);if(n.hasOwnProperty(a))o.splice(a,1);else try{var i=F(r).create(t);i.initialize(e),n[a]=i}catch(t){}})),o.forEach((function(t){n[t].reset(),delete n[t]})),a.trigger(i.a.METRICS_INITIALISATION_COMPLETE)}}function u(){Object.keys(n).forEach((function(t){n[t].reset()})),n={}}return e={reset:function(){a.off(o.MANIFEST_UPDATED,s,e),a.off(o.STREAM_TEARDOWN_COMPLETE,u,e)}},a.on(o.MANIFEST_UPDATED,s,e),a.on(o.STREAM_TEARDOWN_COMPLETE,u,e),e}k.__dashjs_factory_name="MetricsCollectionController";var Y=dashjs.FactoryMaker.getClassFactory(k);function V(){var t=this.context;return{createMetricsReporting:function(e){return s(t).getInstance({eventBus:e.eventBus,dashMetrics:e.dashMetrics,metricsConstants:e.metricsConstants,events:e.events}).initialise(),Y(t).create(e)},getReportingFactory:function(){return m(t).getInstance()},getMetricsHandlerFactory:function(){return L(t).getInstance()}}}V.__dashjs_factory_name="MetricsReporting";var q=dashjs.FactoryMaker.getClassFactory(V);q.events=i.a,dashjs.FactoryMaker.updateClassFactory(V.__dashjs_factory_name,q);e.default=q},8:function(t,e,n){"use strict";var r=n(3),a={DEFAULT:.5,STRONG:1,WEAK:0};function i(t,e,n){return{quality:void 0===t?-1:t,reason:void 0===e?null:e,priority:function(t){var e=a.DEFAULT;return t!==a.DEFAULT&&t!==a.STRONG&&t!==a.WEAK||(e=t),e}(n)}}i.__dashjs_factory_name="SwitchRequest";var o=r.a.getClassFactory(i);o.NO_CHANGE=-1,o.PRIORITY=a,r.a.updateClassFactory(i.__dashjs_factory_name,o),e.a=o},9:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.init()}var e,n,a;return e=t,(n=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}])&&r(e.prototype,n),a&&r(e,a),t}());e.a=a}}).default}));
//# sourceMappingURL=dash.reporting.min.js.map